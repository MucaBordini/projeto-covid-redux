(this["webpackJsonpprojeto-covid-redux"]=this["webpackJsonpprojeto-covid-redux"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/coronavirus.21fabd9c.png"},24:function(e,t,a){e.exports=a(56)},29:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),s=(a(29),a(5)),l=a(4),u=a(2),i=a.n(u),m=a(6),d=a(7),f=a(9),p=a.n(f),b=p.a.create({baseURL:"https://covid19-brazil-api.now.sh/api/report/v1/"}),E=Object(d.b)({name:"covid",initialState:{casos:[],estados:[]},reducers:{set_casos:function(e,t){return e.casos=t.payload,e},set_estados:function(e,t){return e.estados=t.payload,e}}}),v=function(e){return e.covid.casos},h=function(e){return e.covid.estados},g=E.actions,k=function(){return function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("");case 2:a=e.sent,t(g.set_casos(a.data.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=E.reducer;a(54);var O=function(){var e=Object(l.c)(v),t=Object(l.c)(h),a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],u=c[1],d=Object(l.b)();return Object(n.useEffect)((function(){d(k()),d(function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e,t){var a=e.state,n=t.state,r=0;return a>n?r=1:a<n&&(r=-1),r},e.next=3,b.get("");case 3:a=e.sent,(n=a.data.data).sort(r),t(g.set_estados(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[d]),r.a.createElement("div",{className:"lista"},r.a.createElement("select",{className:"selectstate",defaultValue:"DEFAULT",onChange:function(e){return u(e.target.value)}},r.a.createElement("option",{hidden:!0,value:"DEFAULT"},"Selecione um estado"),r.a.createElement("option",{value:"todos"},"Todos os estados"),t.map((function(e,t){return r.a.createElement("option",{value:e.uf,key:t},e.state)}))),r.a.createElement("button",{className:"pesquisa",onClick:function(){return d(function(e){return function(){var t=Object(m.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("todos"===e){t.next=7;break}return t.next=3,b.get("/brazil/uf/".concat(e));case 3:n=t.sent,a(g.set_casos([n.data])),t.next=8;break;case 7:a(k());case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(o))}},"Search"),r.a.createElement("table",{className:"tabela"},r.a.createElement("caption",{className:"legendatabela"},"Covid no Brasil"),r.a.createElement("thead",{className:"cabecalho"},r.a.createElement("tr",null,r.a.createElement("th",{className:"cabecalho",scope:"col"},"Estado"),r.a.createElement("th",{className:"cabecalho",scope:"col"},"Casos"),r.a.createElement("th",{className:"cabecalho",scope:"col"},"Mortes"),r.a.createElement("th",{className:"cabecalho",scope:"col"},"Suspeitas"),r.a.createElement("th",{className:"cabecalho",scope:"col"},"\xdaltima atualiza\xe7\xe3o"))),r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"itens"},e.uf),r.a.createElement("td",{className:"itens"},e.cases),r.a.createElement("td",{className:"itens"},e.deaths),r.a.createElement("td",{className:"itens"},e.suspects),r.a.createElement("td",{className:"itens"},e.datetime))})))))},N=p.a.create({baseURL:"https://reqres.in/api/"}),w=Object(d.b)({name:"user",initialState:{token:"",error:""},reducers:{set_login:function(e,t){return e.token=t.payload,e},set_register:function(e,t){return e.token=t.payload,e},set_error:function(e,t){return e.error=t.payload,e}}}),S=function(e){return e.user.token},x=function(e){return e.user.error},y=w.actions,_=w.reducer,C=a(23),I=a.n(C);a(55);var A=function(){var e=Object(l.c)(S),t=Object(l.c)(x),a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],u=c[1],d=Object(n.useState)(""),f=Object(s.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)(localStorage.getItem("logged")),v=Object(s.a)(E,1)[0],h=Object(l.b)(),g=Object(n.useState)(!1),k=Object(s.a)(g,2),j=k[0],O=k[1];return Object(n.useEffect)((function(){localStorage.getItem("token")||localStorage.setItem("token","undefined"),"undefined"===localStorage.getItem("token")&&localStorage.setItem("token","".concat(e.token))}),[v,e.token]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:I.a,alt:"covid logo"})),v?r.a.createElement("button",{className:"botao",onClick:function(){localStorage.clear(),window.location.reload(!1)}},"Sair"):r.a.createElement("div",{className:"inputs"},r.a.createElement("label",null,"Email: "),r.a.createElement("input",{className:"campoEmail",type:"email",onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",null,"Senha: "),r.a.createElement("input",{className:"campoSenha",type:"password",onChange:function(e){return b(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{className:"botao",onClick:function(){var e,t;h((e=o,t=p,function(){var a=Object(m.a)(i.a.mark((function a(n){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.post("login",{email:e,password:t}).then((function(e){localStorage.setItem("logged",!0),n(y.set_login(e.data)),setTimeout((function(){window.location.reload(!1)}),400)})).catch((function(e){n(y.set_error(e.response.data.error))}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()))}},"LOGIN")),r.a.createElement("div",null,r.a.createElement("button",{className:"botao",onClick:function(){return u(""),b(""),void O(!j)}},"REGISTRAR-SE"))),j?r.a.createElement("div",null,r.a.createElement("h2",null,"Preencha os dados abaixo"),r.a.createElement("label",null,"Email: "),r.a.createElement("input",{className:"campoEmail",type:"email",onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",null,"Senha: "),r.a.createElement("input",{className:"campoSenha",type:"password",onChange:function(e){return b(e.target.value)}}),r.a.createElement("button",{className:"botao",onClick:function(){return h((e=o,t=p,function(){var a=Object(m.a)(i.a.mark((function a(n){var r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,!e||!t){a.next=10;break}if(r.test(e)){a.next=6;break}n(y.set_error("Email inv\xe1lido")),a.next=8;break;case 6:return a.next=8,N.post("users",{email:e,password:t}).then((function(e){n(y.set_error("Usu\xe1rio criado com sucesso!")),n(y.set_register(e.data))})).catch((function(e){n(y.set_error(e.response.data.error))}));case 8:a.next=11;break;case 10:n(y.set_error("Email ou usu\xe1rio n\xe3o informados"));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()));var e,t}},"Cadastrar")):null,r.a.createElement("div",null,t))};var z=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){"undefined"!==localStorage.getItem("token")?c(!0):c(!1)}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(A,null),a?r.a.createElement(O,null):null)},L=Object(d.a)({reducer:{covid:j,user:_}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:L},r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.ed60563e.chunk.js.map