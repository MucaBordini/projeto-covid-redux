(this["webpackJsonpprojeto-covid-redux"]=this["webpackJsonpprojeto-covid-redux"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/coronavirus.21fabd9c.png"},24:function(e,t,a){e.exports=a(56)},29:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),o=a.n(r),s=(a(29),a(5)),l=a(4),u=a(2),i=a.n(u),m=a(6),d=a(7),f=a(9),p=a.n(f),b=p.a.create({baseURL:"https://covid19-brazil-api.now.sh/api/report/v1/"}),E=Object(d.b)({name:"covid",initialState:{casos:[],estados:[]},reducers:{set_casos:function(e,t){return e.casos=t.payload,e},set_estados:function(e,t){return e.estados=t.payload,e}}}),v=function(e){return e.covid.casos},h=function(e){return e.covid.estados},g=E.actions,j=function(){return function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("");case 2:a=e.sent,t(g.set_casos(a.data.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=E.reducer;a(54);var N=function(){var e=Object(l.c)(v),t=Object(l.c)(h),a=Object(n.useState)(""),r=Object(s.a)(a,2),o=r[0],u=r[1],d=Object(l.b)();return Object(n.useEffect)((function(){d(j()),d(function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e,t){var a=e.state,n=t.state,c=0;return a>n?c=1:a<n&&(c=-1),c},e.next=3,b.get("");case 3:a=e.sent,(n=a.data.data).sort(c),t(g.set_estados(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[d]),c.a.createElement("div",{className:"lista"},c.a.createElement("select",{className:"selectstate",defaultValue:"DEFAULT",onChange:function(e){return u(e.target.value)}},c.a.createElement("option",{hidden:!0,value:"DEFAULT"},"Selecione um estado"),c.a.createElement("option",{value:"todos"},"Todos os estados"),t.map((function(e,t){return c.a.createElement("option",{value:e.uf,key:t},e.state)}))),c.a.createElement("button",{className:"pesquisa",onClick:function(){return d(function(e){return function(){var t=Object(m.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("todos"===e){t.next=7;break}return t.next=3,b.get("/brazil/uf/".concat(e));case 3:n=t.sent,a(g.set_casos([n.data])),t.next=8;break;case 7:a(j());case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(o))}},"Search"),c.a.createElement("table",{className:"tabela"},c.a.createElement("caption",{className:"legendatabela"},"Covid no Brasil"),c.a.createElement("thead",{className:"cabecalho"},c.a.createElement("tr",null,c.a.createElement("th",{className:"cabecalho",scope:"col"},"Estado"),c.a.createElement("th",{className:"cabecalho",scope:"col"},"Casos"),c.a.createElement("th",{className:"cabecalho",scope:"col"},"Mortes"),c.a.createElement("th",{className:"cabecalho",scope:"col"},"Suspeitas"),c.a.createElement("th",{className:"cabecalho",scope:"col"},"\xdaltima atualiza\xe7\xe3o"))),c.a.createElement("tbody",null,e.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",{className:"itens"},e.uf),c.a.createElement("td",{className:"itens"},e.cases),c.a.createElement("td",{className:"itens"},e.deaths),c.a.createElement("td",{className:"itens"},e.suspects),c.a.createElement("td",{className:"itens"},e.datetime))})))))},O=p.a.create({baseURL:"https://reqres.in/api/"}),w=Object(d.b)({name:"user",initialState:{token:""},reducers:{set_login:function(e,t){return e.token=t.payload,e},set_register:function(e,t){return e.token=t.payload,e}}}),S=function(e){return e.user.token},y=w.actions,x=w.reducer,C=a(23),I=a.n(C);a(55);var _=function(){var e=Object(l.c)(S),t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],o=a[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),f=d[0],p=d[1],b=Object(n.useState)(localStorage.getItem("logged")),E=Object(s.a)(b,1)[0],v=Object(l.b)(),h=Object(n.useState)(!1),g=Object(s.a)(h,2),j=g[0],k=g[1];return Object(n.useEffect)((function(){localStorage.getItem("token")||localStorage.setItem("token","undefined"),"undefined"===localStorage.getItem("token")&&localStorage.setItem("token","".concat(e.token))}),[E,e.token]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"image"},c.a.createElement("img",{src:I.a,alt:"covid logo"})),E?c.a.createElement("button",{className:"botao",onClick:function(){localStorage.clear(),window.location.reload(!1)}},"Sair"):c.a.createElement("div",{className:"inputs"},c.a.createElement("label",null,"Email: "),c.a.createElement("input",{className:"campoEmail",type:"email",onChange:function(e){return o(e.target.value)}}),c.a.createElement("label",null,"Senha: "),c.a.createElement("input",{className:"campoSenha",type:"password",onChange:function(e){return p(e.target.value)}}),c.a.createElement("div",null,c.a.createElement("button",{className:"botao",onClick:function(){var e,t;v((e=r,t=f,function(){var a=Object(m.a)(i.a.mark((function a(n){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.post("login",{email:e,password:t}).then((function(e){localStorage.setItem("logged",!0),console.log(e.data),n(y.set_login(e.data)),setTimeout((function(){window.location.reload(!1)}),400)})).catch((function(e){alert("Erro ao efetuar login\n",e)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()))}},"LOGIN")),c.a.createElement("div",null,c.a.createElement("button",{className:"botao",onClick:function(){k(!j)}},"REGISTRAR-SE"))),j?c.a.createElement("div",null,c.a.createElement("h2",null,"Preencha os dados abaixo"),c.a.createElement("label",null,"Email: "),c.a.createElement("input",{className:"campoEmail",type:"email",onChange:function(e){return o(e.target.value)}}),c.a.createElement("label",null,"Senha: "),c.a.createElement("input",{className:"campoSenha",type:"password",onChange:function(e){return p(e.target.value)}}),c.a.createElement("button",{className:"botao",onClick:function(){return v((e=r,t=f,function(){var a=Object(m.a)(i.a.mark((function a(n){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.post("users",{email:e,password:t}).then((function(e){console.log(e.data),alert("Usu\xe1rio criado com sucesso!"),n(y.set_register(e.data))})).catch((function(e){alert("Erro ao criar novo usu\xe1rio\n",e)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()));var e,t}},"Cadastrar")):null)};var L=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){"undefined"!==localStorage.getItem("token")?r(!0):r(!1)}),[]),c.a.createElement("div",{className:"App"},c.a.createElement(_,null),a?c.a.createElement(N,null):null)},R=Object(d.a)({reducer:{covid:k,user:x}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(l.a,{store:R},c.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.26bd9d3b.chunk.js.map